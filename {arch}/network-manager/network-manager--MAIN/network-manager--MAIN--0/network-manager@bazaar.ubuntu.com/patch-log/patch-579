Revision: network-manager--MAIN--0--patch-579
Archive: network-manager@bazaar.ubuntu.com
Creator: Arch Librarian <arch@canonical.com>
Date: Sat Aug 13 16:15:44 BST 2005
Standard-date: 2005-08-13 15:15:44 GMT
Modified-files: ChangeLog src/NetworkManagerDevice.c
    src/NetworkManagerPolicy.c
New-patches: network-manager@bazaar.ubuntu.com/network-manager--MAIN--0--patch-579
Summary: 2005-05-08  Dan Williams  <dcbw@redhat.com>
CSCVSID: MAIN.580
Keywords: cscvs:MAIN.580

Author: dcbw
Date: 2005-05-08 16:31:02 GMT
2005-05-08  Dan Williams  <dcbw@redhat.com>

	* src/NetworkManagerPolicy.c
		- (nm_policy_activation_finish): Don't set NM_ACT_STAGE_ACTIVATED here, instead...
		- (nm_policy_schedule_activation_finish): Set NM_ACT_STAGE_ACTIVATED here to
			fix a situation where NM is told to terminate and the device stops activation,
			but the main thread isn't aware of that because it would never have run
			nm_policy_activation_finish() to set the ACTIVATED flag, because the main loop
			had already quit.

	* src/NetworkManagerDevice.c
		- (nm_device_probe_wired_link_state): cosmetic fixes
		- (nm_device_activate_stage5_ip_config_commit): Don't check link state if
			we've failed to activate or been canceled.
		- (nm_ac_test): nm_debug -> nm_info for "waiting for device to cancel" message
