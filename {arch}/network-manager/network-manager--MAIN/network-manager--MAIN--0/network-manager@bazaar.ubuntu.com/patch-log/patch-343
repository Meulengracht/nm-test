Revision: network-manager--MAIN--0--patch-343
Archive: network-manager@bazaar.ubuntu.com
Creator: Arch Librarian <arch@canonical.com>
Date: Sat Aug 13 16:00:11 BST 2005
Standard-date: 2005-08-13 15:00:11 GMT
New-files: named/.arch-ids/.cvsignore.id
    named/.arch-ids/=id named/.arch-ids/Makefile.am.id
    named/.arch-ids/named.conf.id
    named/.arch-ids/nm-named-manager.c.id
    named/.arch-ids/nm-named-manager.h.id named/.cvsignore
    named/Makefile.am named/named.conf
    named/nm-named-manager.c named/nm-named-manager.h
New-directories: named named/.arch-ids
Modified-files: ChangeLog Makefile.am configure.in
    src/Makefile.am src/NetworkManager.c
    src/NetworkManagerDHCP.c src/NetworkManagerDevice.c
    src/NetworkManagerMain.h src/NetworkManagerSystem.c
New-patches: network-manager@bazaar.ubuntu.com/network-manager--MAIN--0--patch-343
Summary: 2004-12-21  Colin Walters  <walters@redhat.com>
CSCVSID: MAIN.344
Keywords: cscvs:MAIN.344

Author: walters
Date: 2004-12-21 06:49:21 GMT
2004-12-21  Colin Walters  <walters@redhat.com>

	* src/NetworkManager.c (nm_data_new): Initialize named.
	Also, set up a signal handler for SIGINT/SIGTERM, and exit
	the mainloop when these signals are received.
	(nm_data_free): Unref named.
	(sigterm_handler, sigterm_pipe_handler): New functions for
	exiting mainloop.

	* src/NetworkManagerMain.h (NMData): Add signal handling and
	nameserver bits.

	* src/NetworkManager.c (nm_device_unref): Quit device mainloop on
	unref.

	* src/NetworkManagerDHCP.c (set_nameservers): New function;
	set nameservers from DHCP response data.
	(set_domain_search): Set domain search from DHCP response.
	(nm_device_dhcp_configure): Invoke them.

	* src/NetworkManagerSystem.c
	(nm_system_device_update_resolv_conf): Delete.  Deleting
	code is totally sweet.

	* src/Makefile.am (NetworkManager_LDADD): Add libnamed.

	* named/nm-named-manager.h, named/nm-named-manager.c: New files;
	implements an object which controls a nameserver.  Currently
	uses bind 9.

	* configure.in: Check for named.

	* Makefile.am (SUBDIRS): Add named dir.

	* named/named.conf: New template config file.
